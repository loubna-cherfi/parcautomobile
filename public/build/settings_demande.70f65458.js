(self.webpackChunk=self.webpackChunk||[]).push([[113],{26189:(t,e,n)=>{"use strict";var a=n(6672),r=n.n(a);const o=JSON.parse('{"base_url":"","routes":{"app_login":{"tokens":[["text","/login"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_logout":{"tokens":[["text","/logout"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_list":{"tokens":[["text","/setting/module/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_add":{"tokens":[["text","/setting/module/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_toggle_active":{"tokens":[["variable","/","[^/]++","module",true],["text","/setting/module/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_list":{"tokens":[["text","/setting/sousmodule/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_add":{"tokens":[["text","/setting/sousmodule/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_toggle_active":{"tokens":[["variable","/","[^/]++","sousmodule",true],["text","/setting/sousmodule/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_assign_convention":{"tokens":[["text","/user/assign-convention"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_assign_caisse":{"tokens":[["text","/user/assign-caisse"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_duplicate_user":{"tokens":[["text","/user/duplicate-user"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]}},"prefix":"","host":"localhost","port":"","scheme":"http","locale":""}');r().setRoutingData(o)},59051:(t,e,n)=>{n(89554),n(41539),n(54747),n(91058),n(92222),n(83710),n(47042),n(28733),n(82526),n(41817),n(73210),n(69826),n(56977),n(54678),n(57658),n(38862),$(document).ready((function(){$("#demandeTable").DataTable({lengthMenu:[[15,25,50,-1],[15,25,50,"ALL"]],autoWidth:!1,destroy:!0}),"undefined"!=typeof bootstrap&&void 0!==bootstrap.Tooltip?document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach((function(t){return new bootstrap.Tooltip(t)})):$('[data-toggle="tooltip"]').tooltip();var t=0;$("#add-detail").on("click",(function(){var e=function(t){return $('select[name="details[0]['.concat(t,']"] option:selected'))},n=e("vehicule"),a=e("conducteur"),r=e("type_prestation"),o=e("zone"),i=e("prestation"),s=$('input[name="details[0][quantite]"]'),d=$('input[name="details[0][nb_jours]"]'),c=parseInt(s.val())||0,u=parseInt(d.val())||0,l=$('input[name="dateDemande"]').val();!(n.val()&&a.val()&&r.val()&&o.val()&&i.val())||c<=0||u<=0?alert("Veuillez remplir tous les champs du détail avec des valeurs valides."):$.ajax({url:"/demande/ajax/tarif",method:"GET",data:{prestationId:i.val(),date:l,quantite:c,nbJours:u},success:function(e){$("#table-details-container").show(),$("#table-details tbody").append('\n          <tr data-index="'.concat(t,'">\n            <td>').concat(t+1,"</td>\n            <td>").concat(n.text(),'<input type="hidden" name="details[').concat(t,'][vehicule]" value="').concat(n.val(),'"></td>\n            <td>').concat(a.text(),'<input type="hidden" name="details[').concat(t,'][conducteur]" value="').concat(a.val(),'"></td>\n            <td>').concat(r.text(),'<input type="hidden" name="details[').concat(t,'][type_prestation]" value="').concat(r.val(),'"></td>\n            <td>').concat(o.text(),'<input type="hidden" name="details[').concat(t,'][zone]" value="').concat(o.val(),'"></td>\n            <td>').concat(c,'<input type="hidden" name="details[').concat(t,'][quantite]" value="').concat(c,'"></td>\n            <td>').concat(u,'<input type="hidden" name="details[').concat(t,'][nb_jours]" value="').concat(u,'"></td>\n            <td><button class="btn btn-sm btnRemoveDetail" type="button"><i class="fa fa-trash"></i></button></td>\n          </tr>\n        ')),t++,$("#zone-detail select, #zone-detail input").each((function(){var t=$(this);if("select"===t.prop("tagName").toLowerCase()){var e=t.attr("id");"add-prestation-0"===e?t.html('<option value="">Prestation</option>'):e&&$("#templates #"+e+"-template").length&&t.html($("#templates #"+e+"-template").html()),t.val("")}else t.val("");t.removeAttr("name")}))},error:function(){alert("Erreur lors du calcul du tarif.")}})})),$(document).on("click",".btnRemoveDetail",(function(){$(this).closest("tr").remove(),0===$("#table-details tbody tr").length&&($("#table-details-container").hide(),t=0)})),$("#add-type-prestation, #add-zone").on("change",(function(){var t,e,n,a;t="#add-zone",e="#add-prestation-0",n=$("#add-type-prestation").val(),a=$(t).val(),n&&a?$.ajax({url:"/demande/ajax/prestations",method:"GET",data:{type:n,zone:a},success:function(t){var n='<option value="">Sélectionner une prestation</option>';t.forEach((function(t){n+='<option value="'.concat(t.id,'">').concat(t.nom,"</option>")})),$(e).html(n)},error:function(){$(e).html('<option value="">Erreur de chargement</option>')}}):$(e).html('<option value="">Sélectionner une prestation</option>')})),$("#addDemande").on("shown.bs.modal",(function(){var t=(new Date).toISOString().slice(0,16);$('input[name="dateDemande"]').val(t)})),$("#formAddDemande").on("submit",(function(t){0===$("#table-details tbody tr").length&&(alert("Veuillez ajouter au moins un détail avant de soumettre."),t.preventDefault())})),$(document).on("click",".btnTraiterDemande",(function(){var t=$(this).data("id");$.ajax({url:"/demande/ajax/get/"+t,method:"GET",success:function(t){$("#traiter-id").val(t.id),$("#traiter-nom").val(t.nomBenificiaire),$("#traiter-cin").val(t.cin),$("#traiter-observation").val(t.observation),$("#traiter-description").val(t.description),$("#traiter-contact").val(t.contact),$("#traiter-nbPersonnes").val(t.nbPersonnes),$("#traiter-date").val(t.dateDemande),$("#traiter-adresse").val(t.adressDepart);var e=$("#traiter-details-table tbody");e.empty(),t.details.forEach((function(t,n){var a;e.append('\n    <tr data-prestation-id="'.concat(t.prestationId,'">\n      <td>').concat(n+1,'</td>\n      <td class="vehicule">').concat(t.vehicule,'</td>\n      <td class="conducteur">').concat(t.conducteur,'</td>\n      <td class="type_prestation">').concat(t.type_prestation,'</td>\n      <td class="zone">').concat(t.zone,'</td>\n      <td class="prestation">').concat(t.prestation,'</td>\n      <td class="quantite">').concat(t.quantite,'</td>\n      <td class="nb_jours">').concat(t.nb_jours,'</td>\n      <td class="tarif">').concat(null!==(a=t.tarif)&&void 0!==a?a:"",'</td>\n      <td>\n        <div class="dropdown">\n          <button class="btn btn-sm" type="button" id="dropdownMenuButton').concat(t.id,'" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width: 30px; height: 30px; padding: 0;">\n            <i class="fa-solid fa-ellipsis-vertical"></i>\n          </button>\n          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton').concat(t.id,'">\n            <button type="button" class="dropdown-item btnModifierDetail" data-id="').concat(t.id,'">\n              <i class="fa-solid fa-pen-to-square"></i> Modifier\n            </button>\n          </div>\n        </div>\n      </td>\n    </tr>\n  '))})),$("#traiterDemande").modal("show")},error:function(){alert("Erreur lors du chargement de la demande.")}})})),$(document).on("click",".btnModifierDetail",(function(){var t=$(this).closest("tr"),e=$(this).data("id"),n=t.data("prestation-id"),a=t.find("td.prestation").text().trim();$("#detail-id").val(e),$("#edit-vehicule").val(t.find("td.vehicule").text().trim()),$("#edit-conducteur").val(t.find("td.conducteur").text().trim()),$("#edit-type").val(t.find("td.type_prestation").text().trim()),$("#edit-zone").val(t.find("td.zone").text().trim()),$("#edit-prestation").val(a),$("#edit-prestation-id").val(n),$("#edit-quantite").val(t.find("td.quantite").text().trim()),$("#edit-jours").val(t.find("td.nb_jours").text().trim()),$("#modifierDetailModal").modal("show")})),$("#btn-enregistrer-detail").on("click",(function(t){t.preventDefault();var e=$("#modifierDetailModal"),n=$("#edit-prestation-id").val(),a=$("#edit-quantite").val(),r=$("#edit-jours").val(),o=$("#traiter-date").val();n?$.ajax({url:"/demande/ajax/tarif",method:"GET",data:{prestationId:n,quantite:a,nbJours:r,date:o},success:function(t){var n=$("#detail-id").val(),o=$('#traiter-details-table tbody tr button.btnModifierDetail[data-id="'.concat(n,'"]')).closest("tr");o.find(".quantite").text(a),o.find(".nb_jours").text(r),o.find(".tarif").text(parseFloat(t).toFixed(2)),e.modal("hide")},error:function(){alert("Erreur lors du recalcul du tarif.")}}):alert("Prestation non sélectionnée correctement.")})),$("#btn-traiter-enregistrer").on("click",(function(){var t=$("#traiter-id").val(),e=[];$("#traiter-details-table tbody tr").each((function(){var t=$(this);e.push({vehicule:t.find(".vehicule").text().trim(),conducteur:t.find(".conducteur").text().trim(),type_prestation:t.find(".type_prestation").text().trim(),zone:t.find(".zone").text().trim(),prestation:t.find(".prestation").text().trim(),quantite:t.find(".quantite").text().trim(),nb_jours:t.find(".nb_jours").text().trim(),tarif:t.find(".tarif").text().trim()})})),$.ajax({url:"/demande/traiter/enregistrer",method:"POST",contentType:"application/json",data:JSON.stringify({id:t,details:e}),success:function(t){alert(t.message),location.reload()},error:function(){alert("Erreur lors de l'enregistrement du traitement.")}})}))}))},18533:(t,e,n)=>{"use strict";var a=n(42092).forEach,r=n(9341)("forEach");t.exports=r?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},9341:(t,e,n)=>{"use strict";var a=n(47293);t.exports=function(t,e){var n=[][t];return!!n&&a((function(){n.call(null,e||function(){return 1},1)}))}},85573:(t,e,n)=>{"use strict";var a=n(1702),r=n(47293),o=n(76650).start,i=RangeError,s=isFinite,d=Math.abs,c=Date.prototype,u=c.toISOString,l=a(c.getTime),p=a(c.getUTCDate),f=a(c.getUTCFullYear),m=a(c.getUTCHours),v=a(c.getUTCMilliseconds),h=a(c.getUTCMinutes),g=a(c.getUTCMonth),b=a(c.getUTCSeconds);t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!r((function(){u.call(new Date(NaN))}))?function(){if(!s(l(this)))throw i("Invalid time value");var t=this,e=f(t),n=v(t),a=e<0?"-":e>9999?"+":"";return a+o(d(e),a?6:4,0)+"-"+o(g(t)+1,2,0)+"-"+o(p(t),2,0)+"T"+o(m(t),2,0)+":"+o(h(t),2,0)+":"+o(b(t),2,0)+"."+o(n,3,0)+"Z"}:u},2814:(t,e,n)=>{"use strict";var a=n(17854),r=n(47293),o=n(1702),i=n(41340),s=n(53111).trim,d=n(81361),c=o("".charAt),u=a.parseFloat,l=a.Symbol,p=l&&l.iterator,f=1/u(d+"-0")!=-1/0||p&&!r((function(){u(Object(p))}));t.exports=f?function(t){var e=s(i(t)),n=u(e);return 0===n&&"-"==c(e,0)?-0:n}:u},83009:(t,e,n)=>{"use strict";var a=n(17854),r=n(47293),o=n(1702),i=n(41340),s=n(53111).trim,d=n(81361),c=a.parseInt,u=a.Symbol,l=u&&u.iterator,p=/^[+-]?0x/i,f=o(p.exec),m=8!==c(d+"08")||22!==c(d+"0x16")||l&&!r((function(){c(Object(l))}));t.exports=m?function(t,e){var n=s(i(t));return c(n,e>>>0||(f(p,n)?16:10))}:c},76650:(t,e,n)=>{"use strict";var a=n(1702),r=n(17466),o=n(41340),i=n(38415),s=n(84488),d=a(i),c=a("".slice),u=Math.ceil,l=function(t){return function(e,n,a){var i,l,p=o(s(e)),f=r(n),m=p.length,v=void 0===a?" ":o(a);return f<=m||""==v?p:((l=d(v,u((i=f-m)/v.length))).length>i&&(l=c(l,0,i)),t?p+l:l+p)}};t.exports={start:l(!1),end:l(!0)}},38415:(t,e,n)=>{"use strict";var a=n(19303),r=n(41340),o=n(84488),i=RangeError;t.exports=function(t){var e=r(o(this)),n="",s=a(t);if(s<0||s==1/0)throw i("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},76091:(t,e,n)=>{"use strict";var a=n(76530).PROPER,r=n(47293),o=n(81361);t.exports=function(t){return r((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||a&&o[t].name!==t}))}},53111:(t,e,n)=>{"use strict";var a=n(1702),r=n(84488),o=n(41340),i=n(81361),s=a("".replace),d=RegExp("^["+i+"]+"),c=RegExp("(^|[^"+i+"])["+i+"]+$"),u=function(t){return function(e){var n=o(r(e));return 1&t&&(n=s(n,d,"")),2&t&&(n=s(n,c,"$1")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},50863:(t,e,n)=>{"use strict";var a=n(1702);t.exports=a(1..valueOf)},81361:t=>{"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},92222:(t,e,n)=>{"use strict";var a=n(82109),r=n(47293),o=n(43157),i=n(70111),s=n(47908),d=n(26244),c=n(7207),u=n(86135),l=n(65417),p=n(81194),f=n(5112),m=n(7392),v=f("isConcatSpreadable"),h=m>=51||!r((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),g=function(t){if(!i(t))return!1;var e=t[v];return void 0!==e?!!e:o(t)};a({target:"Array",proto:!0,arity:1,forced:!h||!p("concat")},{concat:function(t){var e,n,a,r,o,i=s(this),p=l(i,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(g(o=-1===e?i:arguments[e]))for(r=d(o),c(f+r),n=0;n<r;n++,f++)n in o&&u(p,f,o[n]);else c(f+1),u(p,f++,o);return p.length=f,p}})},69826:(t,e,n)=>{"use strict";var a=n(82109),r=n(42092).find,o=n(51223),i="find",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},89554:(t,e,n)=>{"use strict";var a=n(82109),r=n(18533);a({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},28733:(t,e,n)=>{"use strict";var a=n(82109),r=n(85573);a({target:"Date",proto:!0,forced:Date.prototype.toISOString!==r},{toISOString:r})},83710:(t,e,n)=>{"use strict";var a=n(1702),r=n(98052),o=Date.prototype,i="Invalid Date",s="toString",d=a(o[s]),c=a(o.getTime);String(new Date(NaN))!=i&&r(o,s,(function(){var t=c(this);return t==t?d(this):i}))},56977:(t,e,n)=>{"use strict";var a=n(82109),r=n(1702),o=n(19303),i=n(50863),s=n(38415),d=n(47293),c=RangeError,u=String,l=Math.floor,p=r(s),f=r("".slice),m=r(1..toFixed),v=function(t,e,n){return 0===e?n:e%2==1?v(t,e-1,n*t):v(t*t,e/2,n)},h=function(t,e,n){for(var a=-1,r=n;++a<6;)r+=e*t[a],t[a]=r%1e7,r=l(r/1e7)},g=function(t,e){for(var n=6,a=0;--n>=0;)a+=t[n],t[n]=l(a/e),a=a%e*1e7},b=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var a=u(t[e]);n=""===n?a:n+p("0",7-a.length)+a}return n};a({target:"Number",proto:!0,forced:d((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!d((function(){m({})}))},{toFixed:function(t){var e,n,a,r,s=i(this),d=o(t),l=[0,0,0,0,0,0],m="",$="0";if(d<0||d>20)throw c("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return u(s);if(s<0&&(m="-",s=-s),s>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(s*v(2,69,1))-69)<0?s*v(2,-e,1):s/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(h(l,0,n),a=d;a>=7;)h(l,1e7,0),a-=7;for(h(l,v(10,a,1),0),a=e-1;a>=23;)g(l,1<<23),a-=23;g(l,1<<a),h(l,1,1),g(l,2),$=b(l)}else h(l,0,n),h(l,1<<-e,0),$=b(l)+p("0",d);return $=d>0?m+((r=$.length)<=d?"0."+p("0",d-r)+$:f($,0,r-d)+"."+f($,r-d)):m+$}})},54678:(t,e,n)=>{"use strict";var a=n(82109),r=n(2814);a({global:!0,forced:parseFloat!=r},{parseFloat:r})},91058:(t,e,n)=>{"use strict";var a=n(82109),r=n(83009);a({global:!0,forced:parseInt!=r},{parseInt:r})},73210:(t,e,n)=>{"use strict";var a=n(82109),r=n(53111).trim;a({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return r(this)}})},54747:(t,e,n)=>{"use strict";var a=n(17854),r=n(48324),o=n(98509),i=n(18533),s=n(68880),d=function(t){if(t&&t.forEach!==i)try{s(t,"forEach",i)}catch(e){t.forEach=i}};for(var c in r)r[c]&&d(a[c]&&a[c].prototype);d(o)}},t=>{var e=e=>t(t.s=e);t.O(0,[738,193],(()=>(e(26189),e(59051))));t.O()}]);