(self.webpackChunk=self.webpackChunk||[]).push([[113],{26189:(t,e,n)=>{"use strict";var a=n(6672),o=n.n(a);const s=JSON.parse('{"base_url":"","routes":{"app_login":{"tokens":[["text","/login"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_logout":{"tokens":[["text","/logout"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_list":{"tokens":[["text","/setting/module/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_add":{"tokens":[["text","/setting/module/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_toggle_active":{"tokens":[["variable","/","[^/]++","module",true],["text","/setting/module/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_list":{"tokens":[["text","/setting/sousmodule/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_add":{"tokens":[["text","/setting/sousmodule/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_toggle_active":{"tokens":[["variable","/","[^/]++","sousmodule",true],["text","/setting/sousmodule/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_assign_convention":{"tokens":[["text","/user/assign-convention"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_assign_caisse":{"tokens":[["text","/user/assign-caisse"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_duplicate_user":{"tokens":[["text","/user/duplicate-user"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]}},"prefix":"","host":"localhost","port":"","scheme":"http","locale":""}');o().setRoutingData(s)},59051:(t,e,n)=>{n(89554),n(41539),n(54747),n(91058),n(92222),n(83710),n(47042),n(28733),n(82526),n(41817),$(document).ready((function(){$("#demandeTable").DataTable({lengthMenu:[[15,25,50,-1],[15,25,50,"ALL"]],autoWidth:!1,destroy:!0}),"undefined"!=typeof bootstrap&&void 0!==bootstrap.Tooltip?document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach((function(t){return new bootstrap.Tooltip(t)})):$('[data-toggle="tooltip"]').tooltip();var t=0;$("#add-detail").on("click",(function(){var e=function(t){return $('select[name="details[0]['.concat(t,']"] option:selected'))},n=e("vehicule"),a=e("conducteur"),o=e("type_prestation"),s=e("zone"),r=e("prestation"),i=$('input[name="details[0][quantite]"]'),d=$('input[name="details[0][nb_jours]"]'),c=parseInt(i.val())||0,l=parseInt(d.val())||0,u=$('input[name="dateDemande"]').val();!(n.val()&&a.val()&&o.val()&&s.val()&&r.val())||c<=0||l<=0?alert("Veuillez remplir tous les champs du détail avec des valeurs valides."):$.ajax({url:"/demande/ajax/tarif",method:"GET",data:{prestationId:r.val(),date:u,quantite:c,nbJours:l},success:function(e){$("#table-details-container").show(),$("#table-details tbody").append('\n          <tr data-index="'.concat(t,'">\n            <td>').concat(t+1,"</td>\n            <td>").concat(n.text(),'<input type="hidden" name="details[').concat(t,'][vehicule]" value="').concat(n.val(),'"></td>\n            <td>').concat(a.text(),'<input type="hidden" name="details[').concat(t,'][conducteur]" value="').concat(a.val(),'"></td>\n            <td>').concat(o.text(),'<input type="hidden" name="details[').concat(t,'][type_prestation]" value="').concat(o.val(),'"></td>\n            <td>').concat(s.text(),'<input type="hidden" name="details[').concat(t,'][zone]" value="').concat(s.val(),'"></td>\n            <td>').concat(c,'<input type="hidden" name="details[').concat(t,'][quantite]" value="').concat(c,'"></td>\n            <td>').concat(l,'<input type="hidden" name="details[').concat(t,'][nb_jours]" value="').concat(l,'"></td>\n            <td><button class="btn btn-sm btnRemoveDetail" type="button"><i class="fa fa-trash"></i></button></td>\n          </tr>\n        ')),t++,$("#zone-detail select, #zone-detail input").each((function(){var t=$(this);if("select"===t.prop("tagName").toLowerCase()){var e=t.attr("id");"add-prestation-0"===e?t.html('<option value="">Prestation</option>'):e&&$("#templates #"+e+"-template").length&&t.html($("#templates #"+e+"-template").html()),t.val("")}else t.val("");t.removeAttr("name")}))},error:function(){alert("Erreur lors du calcul du tarif.")}})})),$(document).on("click",".btnRemoveDetail",(function(){$(this).closest("tr").remove(),0===$("#table-details tbody tr").length&&($("#table-details-container").hide(),t=0)})),$("#add-type-prestation, #add-zone").on("change",(function(){var t,e,n,a;t="#add-zone",e="#add-prestation-0",n=$("#add-type-prestation").val(),a=$(t).val(),n&&a?$.ajax({url:"/demande/ajax/prestations",method:"GET",data:{type:n,zone:a},success:function(t){var n='<option value="">Sélectionner une prestation</option>';t.forEach((function(t){n+='<option value="'.concat(t.id,'">').concat(t.nom,"</option>")})),$(e).html(n)},error:function(){$(e).html('<option value="">Erreur de chargement</option>')}}):$(e).html('<option value="">Sélectionner une prestation</option>')})),$("#addDemande").on("shown.bs.modal",(function(){var t=(new Date).toISOString().slice(0,16);$('input[name="dateDemande"]').val(t)})),$("#formAddDemande").on("submit",(function(t){0===$("#table-details tbody tr").length&&(alert("Veuillez ajouter au moins un détail avant de soumettre."),t.preventDefault())})),$(document).on("click",".btnTraiterDemande",(function(){var t=$(this).data("id");$.ajax({url:"/demande/ajax/get/"+t,method:"GET",success:function(t){$("#traiter-id").val(t.id),$("#traiter-nom").val(t.nomBenificiaire),$("#traiter-cin").val(t.cin),$("#traiter-observation").val(t.observation),$("#traiter-description").val(t.description),$("#traiter-contact").val(t.contact),$("#traiter-nbPersonnes").val(t.nbPersonnes),$("#traiter-date").val(t.dateDemande),$("#traiter-adresse").val(t.adressDepart);var e=$("#traiter-details-table tbody");e.empty(),t.details.forEach((function(t,n){e.append("\n    <tr>\n      <td>".concat(n+1,"</td>\n      <td>").concat(t.vehicule,"</td>\n      <td>").concat(t.conducteur,"</td>\n      <td>").concat(t.type_prestation,"</td>\n      <td>").concat(t.zone,"</td>\n      <td>").concat(t.prestation,"</td>\n      <td>").concat(t.quantite,"</td>\n      <td>").concat(t.nb_jours,'</td>\n      <td>\n        <div class="dropdown">\n          <button class="btn  btn-sm dropdown" type="button" data-toggle="dropdown">\n            <i class="fa-solid fa-ellipsis-vertical"></i>\n          </button>\n          <div class="dropdown-menu">\n            <a class="dropdown-item btnEditDetail" href="#" data-index="').concat(n,'"><i class="fa fa-edit"></i> Modifier</a>\n          \n          </div>\n        </div>\n      </td>\n    </tr>\n  '))})),$("#traiterDemande").modal("show")},error:function(){alert("Erreur lors du chargement de la demande.")}})}))}))},18533:(t,e,n)=>{"use strict";var a=n(42092).forEach,o=n(9341)("forEach");t.exports=o?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},9341:(t,e,n)=>{"use strict";var a=n(47293);t.exports=function(t,e){var n=[][t];return!!n&&a((function(){n.call(null,e||function(){return 1},1)}))}},85573:(t,e,n)=>{"use strict";var a=n(1702),o=n(47293),s=n(76650).start,r=RangeError,i=isFinite,d=Math.abs,c=Date.prototype,l=c.toISOString,u=a(c.getTime),p=a(c.getUTCDate),m=a(c.getUTCFullYear),v=a(c.getUTCHours),h=a(c.getUTCMilliseconds),f=a(c.getUTCMinutes),g=a(c.getUTCMonth),b=a(c.getUTCSeconds);t.exports=o((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!o((function(){l.call(new Date(NaN))}))?function(){if(!i(u(this)))throw r("Invalid time value");var t=this,e=m(t),n=h(t),a=e<0?"-":e>9999?"+":"";return a+s(d(e),a?6:4,0)+"-"+s(g(t)+1,2,0)+"-"+s(p(t),2,0)+"T"+s(v(t),2,0)+":"+s(f(t),2,0)+":"+s(b(t),2,0)+"."+s(n,3,0)+"Z"}:l},83009:(t,e,n)=>{"use strict";var a=n(17854),o=n(47293),s=n(1702),r=n(41340),i=n(53111).trim,d=n(81361),c=a.parseInt,l=a.Symbol,u=l&&l.iterator,p=/^[+-]?0x/i,m=s(p.exec),v=8!==c(d+"08")||22!==c(d+"0x16")||u&&!o((function(){c(Object(u))}));t.exports=v?function(t,e){var n=i(r(t));return c(n,e>>>0||(m(p,n)?16:10))}:c},76650:(t,e,n)=>{"use strict";var a=n(1702),o=n(17466),s=n(41340),r=n(38415),i=n(84488),d=a(r),c=a("".slice),l=Math.ceil,u=function(t){return function(e,n,a){var r,u,p=s(i(e)),m=o(n),v=p.length,h=void 0===a?" ":s(a);return m<=v||""==h?p:((u=d(h,l((r=m-v)/h.length))).length>r&&(u=c(u,0,r)),t?p+u:u+p)}};t.exports={start:u(!1),end:u(!0)}},38415:(t,e,n)=>{"use strict";var a=n(19303),o=n(41340),s=n(84488),r=RangeError;t.exports=function(t){var e=o(s(this)),n="",i=a(t);if(i<0||i==1/0)throw r("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},53111:(t,e,n)=>{"use strict";var a=n(1702),o=n(84488),s=n(41340),r=n(81361),i=a("".replace),d=RegExp("^["+r+"]+"),c=RegExp("(^|[^"+r+"])["+r+"]+$"),l=function(t){return function(e){var n=s(o(e));return 1&t&&(n=i(n,d,"")),2&t&&(n=i(n,c,"$1")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},81361:t=>{"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},92222:(t,e,n)=>{"use strict";var a=n(82109),o=n(47293),s=n(43157),r=n(70111),i=n(47908),d=n(26244),c=n(7207),l=n(86135),u=n(65417),p=n(81194),m=n(5112),v=n(7392),h=m("isConcatSpreadable"),f=v>=51||!o((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=function(t){if(!r(t))return!1;var e=t[h];return void 0!==e?!!e:s(t)};a({target:"Array",proto:!0,arity:1,forced:!f||!p("concat")},{concat:function(t){var e,n,a,o,s,r=i(this),p=u(r,0),m=0;for(e=-1,a=arguments.length;e<a;e++)if(g(s=-1===e?r:arguments[e]))for(o=d(s),c(m+o),n=0;n<o;n++,m++)n in s&&l(p,m,s[n]);else c(m+1),l(p,m++,s);return p.length=m,p}})},89554:(t,e,n)=>{"use strict";var a=n(82109),o=n(18533);a({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},28733:(t,e,n)=>{"use strict";var a=n(82109),o=n(85573);a({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},83710:(t,e,n)=>{"use strict";var a=n(1702),o=n(98052),s=Date.prototype,r="Invalid Date",i="toString",d=a(s[i]),c=a(s.getTime);String(new Date(NaN))!=r&&o(s,i,(function(){var t=c(this);return t==t?d(this):r}))},91058:(t,e,n)=>{"use strict";var a=n(82109),o=n(83009);a({global:!0,forced:parseInt!=o},{parseInt:o})},54747:(t,e,n)=>{"use strict";var a=n(17854),o=n(48324),s=n(98509),r=n(18533),i=n(68880),d=function(t){if(t&&t.forEach!==r)try{i(t,"forEach",r)}catch(e){t.forEach=r}};for(var c in o)o[c]&&d(a[c]&&a[c].prototype);d(s)}},t=>{var e=e=>t(t.s=e);t.O(0,[738,937],(()=>(e(26189),e(59051))));t.O()}]);