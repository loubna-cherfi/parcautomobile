(self.webpackChunk=self.webpackChunk||[]).push([[113],{26189:(t,e,n)=>{"use strict";var a=n(6672),o=n.n(a);const r=JSON.parse('{"base_url":"","routes":{"app_login":{"tokens":[["text","/login"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_logout":{"tokens":[["text","/logout"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_list":{"tokens":[["text","/setting/module/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_add":{"tokens":[["text","/setting/module/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_toggle_active":{"tokens":[["variable","/","[^/]++","module",true],["text","/setting/module/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_list":{"tokens":[["text","/setting/sousmodule/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_add":{"tokens":[["text","/setting/sousmodule/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_toggle_active":{"tokens":[["variable","/","[^/]++","sousmodule",true],["text","/setting/sousmodule/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_assign_convention":{"tokens":[["text","/user/assign-convention"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_assign_caisse":{"tokens":[["text","/user/assign-caisse"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_duplicate_user":{"tokens":[["text","/user/duplicate-user"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]}},"prefix":"","host":"localhost","port":"","scheme":"http","locale":""}');o().setRoutingData(r)},59051:(t,e,n)=>{n(89554),n(41539),n(54747),n(91058),n(92222),n(83710),n(47042),n(28733),n(82526),n(41817),n(73210),n(69826),$(document).ready((function(){$("#demandeTable").DataTable({lengthMenu:[[15,25,50,-1],[15,25,50,"ALL"]],autoWidth:!1,destroy:!0}),"undefined"!=typeof bootstrap&&void 0!==bootstrap.Tooltip?document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach((function(t){return new bootstrap.Tooltip(t)})):$('[data-toggle="tooltip"]').tooltip();var t=0;$("#add-detail").on("click",(function(){var e=function(t){return $('select[name="details[0]['.concat(t,']"] option:selected'))},n=e("vehicule"),a=e("conducteur"),o=e("type_prestation"),r=e("zone"),i=e("prestation"),s=$('input[name="details[0][quantite]"]'),d=$('input[name="details[0][nb_jours]"]'),c=parseInt(s.val())||0,u=parseInt(d.val())||0,l=$('input[name="dateDemande"]').val();!(n.val()&&a.val()&&o.val()&&r.val()&&i.val())||c<=0||u<=0?alert("Veuillez remplir tous les champs du détail avec des valeurs valides."):$.ajax({url:"/demande/ajax/tarif",method:"GET",data:{prestationId:i.val(),date:l,quantite:c,nbJours:u},success:function(e){$("#table-details-container").show(),$("#table-details tbody").append('\n          <tr data-index="'.concat(t,'">\n            <td>').concat(t+1,"</td>\n            <td>").concat(n.text(),'<input type="hidden" name="details[').concat(t,'][vehicule]" value="').concat(n.val(),'"></td>\n            <td>').concat(a.text(),'<input type="hidden" name="details[').concat(t,'][conducteur]" value="').concat(a.val(),'"></td>\n            <td>').concat(o.text(),'<input type="hidden" name="details[').concat(t,'][type_prestation]" value="').concat(o.val(),'"></td>\n            <td>').concat(r.text(),'<input type="hidden" name="details[').concat(t,'][zone]" value="').concat(r.val(),'"></td>\n            <td>').concat(c,'<input type="hidden" name="details[').concat(t,'][quantite]" value="').concat(c,'"></td>\n            <td>').concat(u,'<input type="hidden" name="details[').concat(t,'][nb_jours]" value="').concat(u,'"></td>\n            <td><button class="btn btn-sm btnRemoveDetail" type="button"><i class="fa fa-trash"></i></button></td>\n          </tr>\n        ')),t++,$("#zone-detail select, #zone-detail input").each((function(){var t=$(this);if("select"===t.prop("tagName").toLowerCase()){var e=t.attr("id");"add-prestation-0"===e?t.html('<option value="">Prestation</option>'):e&&$("#templates #"+e+"-template").length&&t.html($("#templates #"+e+"-template").html()),t.val("")}else t.val("");t.removeAttr("name")}))},error:function(){alert("Erreur lors du calcul du tarif.")}})})),$(document).on("click",".btnRemoveDetail",(function(){$(this).closest("tr").remove(),0===$("#table-details tbody tr").length&&($("#table-details-container").hide(),t=0)})),$("#add-type-prestation, #add-zone").on("change",(function(){var t,e,n,a;t="#add-zone",e="#add-prestation-0",n=$("#add-type-prestation").val(),a=$(t).val(),n&&a?$.ajax({url:"/demande/ajax/prestations",method:"GET",data:{type:n,zone:a},success:function(t){var n='<option value="">Sélectionner une prestation</option>';t.forEach((function(t){n+='<option value="'.concat(t.id,'">').concat(t.nom,"</option>")})),$(e).html(n)},error:function(){$(e).html('<option value="">Erreur de chargement</option>')}}):$(e).html('<option value="">Sélectionner une prestation</option>')})),$("#addDemande").on("shown.bs.modal",(function(){var t=(new Date).toISOString().slice(0,16);$('input[name="dateDemande"]').val(t)})),$("#formAddDemande").on("submit",(function(t){0===$("#table-details tbody tr").length&&(alert("Veuillez ajouter au moins un détail avant de soumettre."),t.preventDefault())})),$(document).on("click",".btnTraiterDemande",(function(){var t=$(this).data("id");$.ajax({url:"/demande/ajax/get/"+t,method:"GET",success:function(t){$("#traiter-id").val(t.id),$("#traiter-nom").val(t.nomBenificiaire),$("#traiter-cin").val(t.cin),$("#traiter-observation").val(t.observation),$("#traiter-description").val(t.description),$("#traiter-contact").val(t.contact),$("#traiter-nbPersonnes").val(t.nbPersonnes),$("#traiter-date").val(t.dateDemande),$("#traiter-adresse").val(t.adressDepart);var e=$("#traiter-details-table tbody");e.empty(),t.details.forEach((function(t,n){e.append("\n          <tr>\n            <td>".concat(n+1,"</td>\n            <td>").concat(t.vehicule,"</td>\n            <td>").concat(t.conducteur,"</td>\n            <td>").concat(t.type_prestation,"</td>\n            <td>").concat(t.zone,"</td>\n            <td>").concat(t.prestation,"</td>\n            <td>").concat(t.quantite,"</td>\n            <td>").concat(t.nb_jours,'</td>\n            <td></td>\n           <td>\n                <div class="dropdown">\n                  <button class="btn btn-sm" type="button" id="dropdownMenuButton').concat(t.id,'" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width: 30px; height: 30px; padding: 0;">\n                    <i class="fa-solid fa-ellipsis-vertical"></i>\n                  </button>\n                  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton').concat(t.id,'">\n                    <button type="button" class="dropdown-item btnModifierDetail" data-id="').concat(t.id,'">\n                      <i class="fa-solid fa-pen-to-square"></i> Modifier\n                    </button>\n                  </div>\n                </div>\n              </td>\n          </tr>\n        '))})),$("#traiterDemande").modal("show")},error:function(){alert("Erreur lors du chargement de la demande.")}})})),$(document).on("click",".btnModifierDetail",(function(){var t=$(this).data("id"),e=$(this).closest("tr");$("#detail-id").val(t),$("#edit-vehicule").val(e.find("td:eq(1)").text().trim()),$("#edit-conducteur").val(e.find("td:eq(2)").text().trim()),$("#edit-type").val(e.find("td:eq(3)").text().trim()),$("#edit-zone").val(e.find("td:eq(4)").text().trim()),$("#edit-prestation").val(e.find("td:eq(5)").text().trim()),$("#edit-quantite").val(e.find("td:eq(6)").text().trim()),$("#edit-jours").val(e.find("td:eq(7)").text().trim()),$("#modifierDetailModal").modal("show")}))}))},18533:(t,e,n)=>{"use strict";var a=n(42092).forEach,o=n(9341)("forEach");t.exports=o?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},9341:(t,e,n)=>{"use strict";var a=n(47293);t.exports=function(t,e){var n=[][t];return!!n&&a((function(){n.call(null,e||function(){return 1},1)}))}},85573:(t,e,n)=>{"use strict";var a=n(1702),o=n(47293),r=n(76650).start,i=RangeError,s=isFinite,d=Math.abs,c=Date.prototype,u=c.toISOString,l=a(c.getTime),p=a(c.getUTCDate),m=a(c.getUTCFullYear),v=a(c.getUTCHours),h=a(c.getUTCMilliseconds),f=a(c.getUTCMinutes),g=a(c.getUTCMonth),$=a(c.getUTCSeconds);t.exports=o((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!o((function(){u.call(new Date(NaN))}))?function(){if(!s(l(this)))throw i("Invalid time value");var t=this,e=m(t),n=h(t),a=e<0?"-":e>9999?"+":"";return a+r(d(e),a?6:4,0)+"-"+r(g(t)+1,2,0)+"-"+r(p(t),2,0)+"T"+r(v(t),2,0)+":"+r(f(t),2,0)+":"+r($(t),2,0)+"."+r(n,3,0)+"Z"}:u},83009:(t,e,n)=>{"use strict";var a=n(17854),o=n(47293),r=n(1702),i=n(41340),s=n(53111).trim,d=n(81361),c=a.parseInt,u=a.Symbol,l=u&&u.iterator,p=/^[+-]?0x/i,m=r(p.exec),v=8!==c(d+"08")||22!==c(d+"0x16")||l&&!o((function(){c(Object(l))}));t.exports=v?function(t,e){var n=s(i(t));return c(n,e>>>0||(m(p,n)?16:10))}:c},76650:(t,e,n)=>{"use strict";var a=n(1702),o=n(17466),r=n(41340),i=n(38415),s=n(84488),d=a(i),c=a("".slice),u=Math.ceil,l=function(t){return function(e,n,a){var i,l,p=r(s(e)),m=o(n),v=p.length,h=void 0===a?" ":r(a);return m<=v||""==h?p:((l=d(h,u((i=m-v)/h.length))).length>i&&(l=c(l,0,i)),t?p+l:l+p)}};t.exports={start:l(!1),end:l(!0)}},38415:(t,e,n)=>{"use strict";var a=n(19303),o=n(41340),r=n(84488),i=RangeError;t.exports=function(t){var e=o(r(this)),n="",s=a(t);if(s<0||s==1/0)throw i("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},76091:(t,e,n)=>{"use strict";var a=n(76530).PROPER,o=n(47293),r=n(81361);t.exports=function(t){return o((function(){return!!r[t]()||"​᠎"!=="​᠎"[t]()||a&&r[t].name!==t}))}},53111:(t,e,n)=>{"use strict";var a=n(1702),o=n(84488),r=n(41340),i=n(81361),s=a("".replace),d=RegExp("^["+i+"]+"),c=RegExp("(^|[^"+i+"])["+i+"]+$"),u=function(t){return function(e){var n=r(o(e));return 1&t&&(n=s(n,d,"")),2&t&&(n=s(n,c,"$1")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},81361:t=>{"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},92222:(t,e,n)=>{"use strict";var a=n(82109),o=n(47293),r=n(43157),i=n(70111),s=n(47908),d=n(26244),c=n(7207),u=n(86135),l=n(65417),p=n(81194),m=n(5112),v=n(7392),h=m("isConcatSpreadable"),f=v>=51||!o((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=function(t){if(!i(t))return!1;var e=t[h];return void 0!==e?!!e:r(t)};a({target:"Array",proto:!0,arity:1,forced:!f||!p("concat")},{concat:function(t){var e,n,a,o,r,i=s(this),p=l(i,0),m=0;for(e=-1,a=arguments.length;e<a;e++)if(g(r=-1===e?i:arguments[e]))for(o=d(r),c(m+o),n=0;n<o;n++,m++)n in r&&u(p,m,r[n]);else c(m+1),u(p,m++,r);return p.length=m,p}})},69826:(t,e,n)=>{"use strict";var a=n(82109),o=n(42092).find,r=n(51223),i="find",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(i)},89554:(t,e,n)=>{"use strict";var a=n(82109),o=n(18533);a({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},28733:(t,e,n)=>{"use strict";var a=n(82109),o=n(85573);a({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},83710:(t,e,n)=>{"use strict";var a=n(1702),o=n(98052),r=Date.prototype,i="Invalid Date",s="toString",d=a(r[s]),c=a(r.getTime);String(new Date(NaN))!=i&&o(r,s,(function(){var t=c(this);return t==t?d(this):i}))},91058:(t,e,n)=>{"use strict";var a=n(82109),o=n(83009);a({global:!0,forced:parseInt!=o},{parseInt:o})},73210:(t,e,n)=>{"use strict";var a=n(82109),o=n(53111).trim;a({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return o(this)}})},54747:(t,e,n)=>{"use strict";var a=n(17854),o=n(48324),r=n(98509),i=n(18533),s=n(68880),d=function(t){if(t&&t.forEach!==i)try{s(t,"forEach",i)}catch(e){t.forEach=i}};for(var c in o)o[c]&&d(a[c]&&a[c].prototype);d(r)}},t=>{var e=e=>t(t.s=e);t.O(0,[738,355],(()=>(e(26189),e(59051))));t.O()}]);