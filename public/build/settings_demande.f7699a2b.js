(self.webpackChunk=self.webpackChunk||[]).push([[113],{26189:(t,e,n)=>{"use strict";var r=n(6672),o=n.n(r);const a=JSON.parse('{"base_url":"","routes":{"app_login":{"tokens":[["text","/login"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_logout":{"tokens":[["text","/logout"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_list":{"tokens":[["text","/setting/module/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_add":{"tokens":[["text","/setting/module/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_module_toggle_active":{"tokens":[["variable","/","[^/]++","module",true],["text","/setting/module/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_list":{"tokens":[["text","/setting/sousmodule/list"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_add":{"tokens":[["text","/setting/sousmodule/add"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_settings_sousmodule_toggle_active":{"tokens":[["variable","/","[^/]++","sousmodule",true],["text","/setting/sousmodule/activer"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":[],"schemes":[]},"app_assign_convention":{"tokens":[["text","/user/assign-convention"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_assign_caisse":{"tokens":[["text","/user/assign-caisse"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]},"app_duplicate_user":{"tokens":[["text","/user/duplicate-user"]],"defaults":[],"requirements":[],"hosttokens":[],"methods":["POST"],"schemes":[]}},"prefix":"","host":"localhost","port":"","scheme":"http","locale":""}');o().setRoutingData(a)},59051:(t,e,n)=>{n(89554),n(41539),n(54747),n(91058),n(92222),n(56977),n(83710),n(47042),n(28733),$(document).ready((function(){$("#demandeTable").DataTable({lengthMenu:[[15,25,50,-1],[15,25,50,"ALL"]],autoWidth:!1,destroy:!0}),"undefined"!=typeof bootstrap&&void 0!==bootstrap.Tooltip?document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach((function(t){return new bootstrap.Tooltip(t)})):$('[data-toggle="tooltip"]').tooltip();var t=0;$("#add-detail").on("click",(function(){var e=function(t){return $('select[name="details[0]['.concat(t,']"] option:selected'))},n=e("vehicule"),r=e("conducteur"),o=e("type_prestation"),a=e("zone"),s=e("prestation"),i=$('input[name="details[0][quantite]"]'),c=$('input[name="details[0][nb_jours]"]'),u=parseInt(i.val())||0,l=parseInt(c.val())||0,d=$('input[name="dateDemande"]').val();!(n.val()&&r.val()&&o.val()&&a.val()&&s.val())||u<=0||l<=0?alert("Veuillez remplir tous les champs du détail avec des valeurs valides."):$.ajax({url:"/demande/ajax/tarif",method:"GET",data:{prestationId:s.val(),date:d,quantite:u,nbJours:l},success:function(e){$("#table-details-container").show(),$("#table-details tbody").append('\n          <tr data-index="'.concat(t,'">\n            <td>').concat(t+1,"</td>\n            <td>").concat(n.text(),'<input type="hidden" name="details[').concat(t,'][vehicule]" value="').concat(n.val(),'"></td>\n            <td>').concat(r.text(),'<input type="hidden" name="details[').concat(t,'][conducteur]" value="').concat(r.val(),'"></td>\n            <td>').concat(o.text(),'<input type="hidden" name="details[').concat(t,'][type_prestation]" value="').concat(o.val(),'"></td>\n            <td>').concat(a.text(),'<input type="hidden" name="details[').concat(t,'][zone]" value="').concat(a.val(),'"></td>\n            <td>').concat(s.text(),'<input type="hidden" name="details[').concat(t,'][prestation]" value="').concat(s.val(),'"></td>\n            <td>').concat(u,'<input type="hidden" name="details[').concat(t,'][quantite]" value="').concat(u,'"></td>\n            <td>').concat(l,'<input type="hidden" name="details[').concat(t,'][nb_jours]" value="').concat(l,'"></td>\n            <td>').concat(e.toFixed(2),'<input type="hidden" name="details[').concat(t,'][tarif]" value="').concat(e.toFixed(2),'"></td>\n            <td><button class="btn btn-sm btnRemoveDetail" type="button"><i class="fa fa-trash"></i></button></td>\n          </tr>\n        ')),t++,$("#zone-detail select, #zone-detail input").each((function(){var t=$(this);if("select"===t.prop("tagName").toLowerCase()){var e=t.attr("id");"add-prestation-0"===e?t.html('<option value="">Prestation</option>'):e&&$("#templates #"+e+"-template").length&&t.html($("#templates #"+e+"-template").html()),t.val("")}else t.val("");t.removeAttr("name")}))},error:function(){alert("Erreur lors du calcul du tarif.")}})})),$(document).on("click",".btnRemoveDetail",(function(){$(this).closest("tr").remove(),0===$("#table-details tbody tr").length&&($("#table-details-container").hide(),t=0)})),$("#add-type-prestation, #add-zone").on("change",(function(){var t,e,n,r;t="#add-zone",e="#add-prestation-0",n=$("#add-type-prestation").val(),r=$(t).val(),n&&r?$.ajax({url:"/demande/ajax/prestations",method:"GET",data:{type:n,zone:r},success:function(t){var n='<option value="">Sélectionner une prestation</option>';t.forEach((function(t){n+='<option value="'.concat(t.id,'">').concat(t.nom,"</option>")})),$(e).html(n)},error:function(){$(e).html('<option value="">Erreur de chargement</option>')}}):$(e).html('<option value="">Sélectionner une prestation</option>')})),$("#addDemande").on("shown.bs.modal",(function(){var t=(new Date).toISOString().slice(0,16);$('input[name="dateDemande"]').val(t)})),$("#formAddDemande").on("submit",(function(t){0===$("#table-details tbody tr").length&&(alert("Veuillez ajouter au moins un détail avant de soumettre."),t.preventDefault())}))}))},18533:(t,e,n)=>{"use strict";var r=n(42092).forEach,o=n(9341)("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},42092:(t,e,n)=>{"use strict";var r=n(49974),o=n(1702),a=n(68361),s=n(47908),i=n(26244),c=n(65417),u=o([].push),l=function(t){var e=1==t,n=2==t,o=3==t,l=4==t,d=6==t,p=7==t,f=5==t||d;return function(v,h,m,g){for(var x,y,b=s(v),S=a(b),T=r(h,m),_=i(S),$=0,k=g||c,L=e?k(v,_):n||p?k(v,0):void 0;_>$;$++)if((f||$ in S)&&(y=T(x=S[$],$,b),t))if(e)L[$]=y;else if(y)switch(t){case 3:return!0;case 5:return x;case 6:return $;case 2:u(L,x)}else switch(t){case 4:return!1;case 7:u(L,x)}return d?-1:o||l?l:L}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},81194:(t,e,n)=>{"use strict";var r=n(47293),o=n(5112),a=n(7392),s=o("species");t.exports=function(t){return a>=51||!r((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:(t,e,n)=>{"use strict";var r=n(47293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},50206:(t,e,n)=>{"use strict";var r=n(1702);t.exports=r([].slice)},77475:(t,e,n)=>{"use strict";var r=n(43157),o=n(4411),a=n(70111),s=n(5112)("species"),i=Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(o(e)&&(e===i||r(e.prototype))||a(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?i:e}},65417:(t,e,n)=>{"use strict";var r=n(77475);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},86135:(t,e,n)=>{"use strict";var r=n(34948),o=n(3070),a=n(79114);t.exports=function(t,e,n){var s=r(e);s in t?o.f(t,s,a(0,n)):t[s]=n}},85573:(t,e,n)=>{"use strict";var r=n(1702),o=n(47293),a=n(76650).start,s=RangeError,i=isFinite,c=Math.abs,u=Date.prototype,l=u.toISOString,d=r(u.getTime),p=r(u.getUTCDate),f=r(u.getUTCFullYear),v=r(u.getUTCHours),h=r(u.getUTCMilliseconds),m=r(u.getUTCMinutes),g=r(u.getUTCMonth),x=r(u.getUTCSeconds);t.exports=o((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!o((function(){l.call(new Date(NaN))}))?function(){if(!i(d(this)))throw s("Invalid time value");var t=this,e=f(t),n=h(t),r=e<0?"-":e>9999?"+":"";return r+a(c(e),r?6:4,0)+"-"+a(g(t)+1,2,0)+"-"+a(p(t),2,0)+"T"+a(v(t),2,0)+":"+a(m(t),2,0)+":"+a(x(t),2,0)+"."+a(n,3,0)+"Z"}:l},7207:t=>{"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},48324:t=>{"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:(t,e,n)=>{"use strict";var r=n(80317)("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},49974:(t,e,n)=>{"use strict";var r=n(21470),o=n(19662),a=n(34374),s=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:a?s(t,e):function(){return t.apply(e,arguments)}}},21470:(t,e,n)=>{"use strict";var r=n(84326),o=n(1702);t.exports=function(t){if("Function"===r(t))return o(t)}},43157:(t,e,n)=>{"use strict";var r=n(84326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4411:(t,e,n)=>{"use strict";var r=n(1702),o=n(47293),a=n(60614),s=n(70648),i=n(35005),c=n(42788),u=function(){},l=[],d=i("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=r(p.exec),v=!p.exec(u),h=function(t){if(!a(t))return!1;try{return d(u,l,t),!0}catch(t){return!1}},m=function(t){if(!a(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return v||!!f(p,c(t))}catch(t){return!0}};m.sham=!0,t.exports=!d||o((function(){var t;return h(h.call)||!h(Object)||!h((function(){t=!0}))||t}))?m:h},83009:(t,e,n)=>{"use strict";var r=n(17854),o=n(47293),a=n(1702),s=n(41340),i=n(53111).trim,c=n(81361),u=r.parseInt,l=r.Symbol,d=l&&l.iterator,p=/^[+-]?0x/i,f=a(p.exec),v=8!==u(c+"08")||22!==u(c+"0x16")||d&&!o((function(){u(Object(d))}));t.exports=v?function(t,e){var n=i(s(t));return u(n,e>>>0||(f(p,n)?16:10))}:u},90288:(t,e,n)=>{"use strict";var r=n(51694),o=n(70648);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},76650:(t,e,n)=>{"use strict";var r=n(1702),o=n(17466),a=n(41340),s=n(38415),i=n(84488),c=r(s),u=r("".slice),l=Math.ceil,d=function(t){return function(e,n,r){var s,d,p=a(i(e)),f=o(n),v=p.length,h=void 0===r?" ":a(r);return f<=v||""==h?p:((d=c(h,l((s=f-v)/h.length))).length>s&&(d=u(d,0,s)),t?p+d:d+p)}};t.exports={start:d(!1),end:d(!0)}},38415:(t,e,n)=>{"use strict";var r=n(19303),o=n(41340),a=n(84488),s=RangeError;t.exports=function(t){var e=o(a(this)),n="",i=r(t);if(i<0||i==1/0)throw s("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},53111:(t,e,n)=>{"use strict";var r=n(1702),o=n(84488),a=n(41340),s=n(81361),i=r("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(t){return function(e){var n=a(o(e));return 1&t&&(n=i(n,c,"")),2&t&&(n=i(n,u,"$1")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},50863:(t,e,n)=>{"use strict";var r=n(1702);t.exports=r(1..valueOf)},41340:(t,e,n)=>{"use strict";var r=n(70648),o=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},81361:t=>{"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},92222:(t,e,n)=>{"use strict";var r=n(82109),o=n(47293),a=n(43157),s=n(70111),i=n(47908),c=n(26244),u=n(7207),l=n(86135),d=n(65417),p=n(81194),f=n(5112),v=n(7392),h=f("isConcatSpreadable"),m=v>=51||!o((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=function(t){if(!s(t))return!1;var e=t[h];return void 0!==e?!!e:a(t)};r({target:"Array",proto:!0,arity:1,forced:!m||!p("concat")},{concat:function(t){var e,n,r,o,a,s=i(this),p=d(s,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(g(a=-1===e?s:arguments[e]))for(o=c(a),u(f+o),n=0;n<o;n++,f++)n in a&&l(p,f,a[n]);else u(f+1),l(p,f++,a);return p.length=f,p}})},89554:(t,e,n)=>{"use strict";var r=n(82109),o=n(18533);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},47042:(t,e,n)=>{"use strict";var r=n(82109),o=n(43157),a=n(4411),s=n(70111),i=n(51400),c=n(26244),u=n(45656),l=n(86135),d=n(5112),p=n(81194),f=n(50206),v=p("slice"),h=d("species"),m=Array,g=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(t,e){var n,r,d,p=u(this),v=c(p),x=i(t,v),y=i(void 0===e?v:e,v);if(o(p)&&(n=p.constructor,(a(n)&&(n===m||o(n.prototype))||s(n)&&null===(n=n[h]))&&(n=void 0),n===m||void 0===n))return f(p,x,y);for(r=new(void 0===n?m:n)(g(y-x,0)),d=0;x<y;x++,d++)x in p&&l(r,d,p[x]);return r.length=d,r}})},28733:(t,e,n)=>{"use strict";var r=n(82109),o=n(85573);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},83710:(t,e,n)=>{"use strict";var r=n(1702),o=n(98052),a=Date.prototype,s="Invalid Date",i="toString",c=r(a[i]),u=r(a.getTime);String(new Date(NaN))!=s&&o(a,i,(function(){var t=u(this);return t==t?c(this):s}))},56977:(t,e,n)=>{"use strict";var r=n(82109),o=n(1702),a=n(19303),s=n(50863),i=n(38415),c=n(47293),u=RangeError,l=String,d=Math.floor,p=o(i),f=o("".slice),v=o(1..toFixed),h=function(t,e,n){return 0===e?n:e%2==1?h(t,e-1,n*t):h(t*t,e/2,n)},m=function(t,e,n){for(var r=-1,o=n;++r<6;)o+=e*t[r],t[r]=o%1e7,o=d(o/1e7)},g=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=d(r/e),r=r%e*1e7},x=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=l(t[e]);n=""===n?r:n+p("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!c((function(){v({})}))},{toFixed:function(t){var e,n,r,o,i=s(this),c=a(t),d=[0,0,0,0,0,0],v="",y="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return l(i);if(i<0&&(v="-",i=-i),i>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(i*h(2,69,1))-69)<0?i*h(2,-e,1):i/h(2,e,1),n*=4503599627370496,(e=52-e)>0){for(m(d,0,n),r=c;r>=7;)m(d,1e7,0),r-=7;for(m(d,h(10,r,1),0),r=e-1;r>=23;)g(d,1<<23),r-=23;g(d,1<<r),m(d,1,1),g(d,2),y=x(d)}else m(d,0,n),m(d,1<<-e,0),y=x(d)+p("0",c);return y=c>0?v+((o=y.length)<=c?"0."+p("0",c-o)+y:f(y,0,o-c)+"."+f(y,o-c)):v+y}})},41539:(t,e,n)=>{"use strict";var r=n(51694),o=n(98052),a=n(90288);r||o(Object.prototype,"toString",a,{unsafe:!0})},91058:(t,e,n)=>{"use strict";var r=n(82109),o=n(83009);r({global:!0,forced:parseInt!=o},{parseInt:o})},54747:(t,e,n)=>{"use strict";var r=n(17854),o=n(48324),a=n(98509),s=n(18533),i=n(68880),c=function(t){if(t&&t.forEach!==s)try{i(t,"forEach",s)}catch(e){t.forEach=s}};for(var u in o)o[u]&&c(r[u]&&r[u].prototype);c(a)}},t=>{var e=e=>t(t.s=e);t.O(0,[738],(()=>(e(26189),e(59051))));t.O()}]);